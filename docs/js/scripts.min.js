let pokemonRepository=function(){let e=[],t="https://pokeapi.co/api/v2/pokemon?limit=48&offset=0",o=!1,n=!0;function r(t){e.push(t)}function l(e){return e.charAt(0).toUpperCase()+e.slice(1)}function i(e){let t=document.querySelector(".pokemon-list"),o=document.querySelector("#cartridge-template"),n=document.createElement("div");n.classList.add("col-12","col-md-6","col-lg-4","mb-3");let r=o.content.cloneNode(!0),i=["cart--red","cart--blue","cart--yellow","cart--gray"],a=i[Math.floor(Math.random()*i.length)],c=r.querySelector(".cart--red");c.classList.remove("cart--red"),c.classList.add(a),r.querySelector(".poke-name").textContent=l(e.name);let s=r.querySelector(".poke-sprite");s.src=e.imageUrl,s.alt=e.name,r.querySelector(".cart-body").addEventListener("click",(()=>{!function(e){console.log(e),pokemonRepository.loadDetails(e).then((function(){let t=e.types.map((e=>e.type.name)).join(", "),o=`Height: ${(e.height/10).toFixed(1)}m \n                Weight: ${(e.weight/10).toFixed(1)}kg\n                Type: ${t}`,n=e.gen1Url;modalModule.showModal(l(e.name),o,n)}))}(e)})),n.appendChild(r),t.appendChild(n)}function a(e){let t=e.detailsUrl;return fetch(t).then((function(e){return e.json()})).then((function(t){e.height=t.height,e.types=t.types,e.weight=t.weight,e.imageUrl=t.sprites.other["official-artwork"].front_default,e.pixelUrl=t.sprites.front_default,e.gen1Url=`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/versions/generation-i/yellow/transparent/${t.id}.png`})).catch((function(e){console.error(e)}))}function c(){!o&&n&&(o=!0,fetch(t).then((e=>e.json())).then((e=>{e.results.forEach((e=>{let t={name:e.name,detailsUrl:e.url};r(t),a(t).then((()=>{i(t)}))})),e.next?t=e.next:n=!1})).catch((e=>console.error(e))).finally((()=>{o=!1})))}return c(),{getAll:function(){return e},add:r,addListItem:i,loadList:function(){return fetch(t).then((function(e){return e.json()})).then((function(e){e.results.forEach((function(e){r({name:e.name,detailsUrl:e.url})}))})).catch((function(e){console.error(e)}))},loadDetails:a,loadMore:c}}();pokemonRepository.loadList().then((()=>{pokemonRepository.getAll().forEach((e=>{pokemonRepository.loadDetails(e).then((()=>{pokemonRepository.addListItem(e)}))})),window.addEventListener("scroll",(()=>{window.innerHeight+window.scrollY>=document.body.offsetHeight-100&&pokemonRepository.loadMore()}))}));